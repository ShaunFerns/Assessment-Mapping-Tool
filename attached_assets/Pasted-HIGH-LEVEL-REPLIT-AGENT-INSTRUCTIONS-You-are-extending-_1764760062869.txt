HIGH-LEVEL REPLIT AGENT INSTRUCTIONS

You are extending an existing Flask app that already handles programmes, modules, assessments, and visualisations.
Preserve all existing visual design (TU Dublin navy/teal), the routing flow, and the working features.
Add the following improvements and new functionality.

1. Add Programme-level PLO Management

Extend the /programme page so users can define Programme Learning Outcomes (PLOs).

Data model

Add a global:

programme_plos = []  
# list of {"code": str, "description": str}

UI changes

On the /programme page:

Show a table listing PLOs (code + description).

Add a small form to create new PLOs:

Code (short text, e.g., “PLO1”)

Description (longer text)

Add a delete button for each PLO (simple removal from the list).

Routes

Add:

POST /programme/plos/add

POST /programme/plos/delete/<code>

Use simple in-memory updates for now.

2. Add Module-level MLO Management

Each module needs its own set of Module Learning Outcomes.

Data model

Extend every module dict to include:

"mlos": [
    {"code": "MLO1", "description": "..."},
    ...
]

UI changes

On the /modules page:

Add an “Edit MLOs” button for each module.

Create a new page:

/modules/<module_id>/mlos


This should show:

Module code + title

A table of current MLOs (code + description)

A form to add new MLOs (code + description)

Optional delete button per MLO

No persistence required beyond runtime.

3. Update Assessment Form to Use Dropdowns for PLOs & MLOs

Replace the free-text “PLO” and “MLO” fields on Add Assessment with:

PLO selection (Programme-wide)

Multi-select or checkbox list

Values come from programme_plos

Store selected values in assessment as:

"plos": ["PLO1", "PLO3"]

MLO selection (Module-specific)

Multi-select or checkbox list

Values come from the selected module’s mlos

Store as:

"mlos": ["MLO1", "MLO2"]

Changes to assessment model

Replace old keys:

"plo": str  
"mlo": str


with:

"plos": list  
"mlos": list


When rendering, join lists for display (e.g., "PLO1, PLO2").

4. Support Large Programmes with Stage/Semester Filtering

UG programmes may have ~48 modules across 8 semesters. Visualisations must remain usable.

Data model

Extend modules with:

"stage": int  # 1–4  
"semester": int  # 1 or 2


Add these fields to the Add/Update Module form.

Visualisation pages

On:

/visual/triangle

/visual/heatmap

/visual/analytics

/visual/plo_coverage (new)

Add filters:

Stage selector: All | 1 | 2 | 3 | 4

Semester selector: All | 1 | 2

Apply these filters before calculating which modules/assessments to display.

Default view

If there are >10 modules in the programme, default the visualisation pages to:

Stage 1

Semester 1

Users can still switch to “All”.

5. Improve Mobile Layout (No Overlapping Controls)

Several pages currently overlap on mobile. Add responsiveness.

Requirements

Wrap top-of-page controls (buttons, dropdowns) in a .controls-row flex container:

Desktop: horizontal layout

Mobile: stacked vertically

Allow horizontal scrolling on timeline/heatmap grids:

overflow-x: auto;


Reduce font size of module labels, week labels, and chart headings on small screens:

@media (max-width: 768px) {
    font-size: 0.8rem;
}


Analytics grid:

Desktop: multi-column

Mobile: single column

Do not change colour scheme or typography beyond responsive adjustments.

6. Redesigned PLO Coverage Matrix (Critical Feature)

Replace the simple heatmap with a correct curriculum-mapping matrix used in validation/QA.

Goal

Create /visual/plo_coverage showing:

Rows: PLO codes

Columns: Module codes

Cell:

“X” if module assesses that PLO (≥1 assessment mapped)

Colour intensity = sum of assessment weightings for that PLO in that module

This replaces the current spreadsheet method used by TU Dublin programme teams.

Helper function

Add in app.py:

compute_plo_module_matrix(modules_list, assessments_list)

Behaviour:

Build sorted list of PLO codes from assessment["plos"].

Build list of module codes from filtered modules.

Create matrix:

weights[plo_index][module_index]


For each assessment:

For each PLO in assessment["plos"]:

Add assessment weight to appropriate cell.

Return (plo_codes, module_codes, weights).

Template /templates/plo_coverage.html

Use Plotly:

Heatmap:

z = weights
x = module_codes
y = plo_codes


Generate text array:

"X" where weight > 0

"" otherwise

texttemplate: "%{text}"

Colour scale example:

colorscale: [
  [0, "rgba(255,255,255,1)"],   // no coverage
  [1, "#00A6A6"]                // TU Dublin teal for strongest coverage
]


Add caption:

“X = module assesses this PLO (≥1 assessment). Colour intensity reflects total assessment weighting mapped to that PLO.”

Add navigation link

On /visualisations, add a button:

View PLO Coverage Matrix

Filters (Stage/Semester) apply to this view as well.

7. Keep All Existing Functionality Intact

Do not alter:

The triangle visual

Existing heatmaps

Analytics charts

Test structure

Current layout & branding

Only extend as defined above.